<script setup lang="ts">
import { ref } from "vue"
const props = defineProps<{
  navList: object
  itemList: object
}>()
// ä¸‹ä¸€é¡µ
const handleNext = () => {
  if (carousel.value) {
    console.log(1)

    carousel.value.next()
  }
}
// ä¸Šä¸€é¡µ

const handlePrev = () => {
  if (carousel.value) {
    carousel.value.prev()
  }
}

// é«˜äº®æ¿€æ´»é€‰é¡¹å‚æ•°
const activeIndex = ref<number>(0)
// è·‘é©¬ç¯æ¥å£
interface Carousel {
  prev: () => void
  next: () => void
}
// è·‘é©¬ç¯å¯¹è±¡
const carousel = ref<Carousel | null>(null)
</script>

<template>
  <div class="h-[524px] bg-blue-300 overflow-hidden relative">
    <!-- å¤´éƒ¨ -->
    <div class="h-[36px] bg-yellow-100 border-b mb-[18px]">
      <div class="h-[25px] flex justify-between items-end">
        <!-- å¤´éƒ¨å·¦ä¾§ -->
        <div class="flex">
          <!-- æ ‡é¢˜ -->
          <slot name="title">
            <div>æœ€è¿‘çƒ­é—¨ç”µå½±</div>
          </slot>
          <!-- å¯¼èˆª -->
          <ul class="flex text-[13px] items-end">
            <li
              v-for="(item, index) in props.navList"
              class="ml-[20px] text-[#9B9B9B] hover:cursor-pointer hover:text-white hover:bg-[#208ACC]"
              :class="{ active: index === activeIndex }"
            >
              {{ item }}
            </li>
          </ul>
        </div>
        <!-- å¤´éƒ¨å³ä¾§ -->
        <div
          class="text-[13px] text-[#208ACC] hover:text-white hover:bg-[#208ACC]"
        >
          <RouterLink to="/">æ›´å¤š>></RouterLink>
        </div>
      </div>
    </div>
    <!-- å†…å®¹åŒº -->
    <el-carousel
      trigger="click"
      height="470px"
      arrow="never"
      style="
        --el-carousel-indicator-width: 6px;
        --el-carousel-indicator-height: 6px;
      "
      :interval="6000"
      ref="carousel"
    >
      <el-carousel-item v-for="item in 6" :key="item">
        <div class="flex flex-wrap">
          <el-popover
            v-for="(item, index) in 10"
            placement="right-start"
            :width="350"
            trigger="hover"
            :show-arrow="false"
            :show-after="500"
            transition="none"
          >
            <template #reference>
              <div
                class="w-[115px] h-[210px] bg-yellow-200 mr-[25px] mb-[10px] flex flex-col items-center"
                :class="{ clearMargin: (index + 1) % 5 === 0 }"
              >
                <img src="" alt="" class="h-[161px] bg-red-100 w-full" />
                <div class="text-[13px] text-[#37A]">
                  ç‹—é•‡
                  <span class="text-[#E09015] text-[13px]">7.0</span>
                </div>
              </div>
            </template>
            <template #default>
              <div>
                <!-- ä¸ŠåŠéƒ¨åˆ† -->
                <div class="p-[20px]">
                  <!-- ç”µå½±å -->
                  <RouterLink to="/">
                    <span
                      class="text-[18px] text-[#37a] hover:text-white hover:bg-[#37a] hover:cursor-pointer"
                      >å› æœæŠ¥åº” mahh (2024)
                    </span>
                  </RouterLink>
                  <!-- è¯„åˆ† -->
                  <div class="flex items-center">
                    <el-rate
                      :model-value="4"
                      disabled
                      style="--el-rate-icon-margin: -1px"
                    />
                    <span class="text-[13px] text-[#ff9900] ml-[10px]">8</span>
                  </div>
                  <!-- æ ‡ç­¾ -->
                  <div class="flex justify-start items-start flex-wrap">
                    <span
                      class="bg-[#f5f5f5] text-[13px] px-[8px] py-[2px] rounded-[12px] mx-[3px] my-[3px]"
                      v-for="item in 5"
                      >94åˆ†é’Ÿ</span
                    >
                  </div>
                  <!-- æŒ‰é’® -->
                  <div class="mt-[5px]">
                    <el-button
                      style="border-radius: 0%; width: 60px; height: 25px"
                      >æƒ³çœ‹</el-button
                    >
                    <el-button
                      style="border-radius: 0%; width: 60px; height: 25px"
                      >çœ‹è¿‡</el-button
                    >
                  </div>
                </div>
                <!-- çŸ­è¯„ -->
                <div
                  class="border-t-[1px] bg-[#f5f5f5] p-[20px] text-[13px] text-[#666]"
                >
                  åªèƒ½è¯´åäººå°±æ˜¯åäººï¼Œä»–ä¼šå¯¹è‡ªå·±å®¶äººå¥½ï¼Œä½†ä»–è¿˜æ˜¯äººå“ä½åŠ£ã€‚å¥½äººå°±æ˜¯å¥½äººï¼Œå°±ç®—ä¸æ˜¯è‡ªå·±ç”Ÿçš„ï¼Œè¿˜æ˜¯ä¼šç”¨æ­£ä¹‰å’Œå–„è‰¯å»å¯¹å¾…ï¼Œå‰è¾¹èŠ‚å¥å¤ªæ…¢äº†ï¼Œåè¾¹æ­å¼€ä¸€åˆ‡ï¼Œè®©äººå”å˜˜ï¼Œå¥³å­©å­å¾ˆåšå¼ºï¼Œè­¦å¯Ÿæ¯”è¾ƒæœ‰è¶£ï¼Œè™½ç„¶è´ªè´¢ï¼Œä½†çœŸçš„åŠäº‹
                  <span class="text-[12px] text-[#aaa]"
                    >- AAA-æ¸”ç»ç†à­§â¤âƒğŸ’–çš„çŸ­è¯„</span
                  >
                </div>
              </div>
            </template>
          </el-popover>
        </div>
      </el-carousel-item>
    </el-carousel>
    <el-button
      circle
      class="absolute top-[494px] left-[270px]"
      style="
        width: 18px;
        height: 18px;
        background-color: #6d99d2;
        color: white;
        border: 0;
      "
      @click="handlePrev"
      ><</el-button
    >
    <el-button
      circle
      class="absolute top-[494px] left-[375px]"
      style="
        width: 18px;
        height: 18px;
        background-color: #6d99d2;
        color: white;
        border: 0;
      "
      @click="handleNext"
      >></el-button
    >
  </div>
</template>

<style scoped>
.active {
  color: black;
}
.clearMargin {
  margin-right: 0;
}
.el-carousel :deep(.el-carousel__button) {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background-color: #6198d7;
}
:global(.el-popover.el-popper) {
  border-radius: 0% !important;
  box-shadow: none;
  padding: 0;
}
</style>
